$(function(){function o(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(".sidebar .top ul li").on("mouseenter",function(a){a.target.tagName,$(this).parent().find("a").removeClass("cur"),$(this).children("a").addClass("cur");var t=$(this).parents(".top").next(),i=0;switch(t.children().removeClass("hidden").hide(),$(this).attr("class")){case"first":t.children(".first").show(),i="18px";break;case"second":t.children(".second").show(),i="114px";break;case"last":t.children(".last").show(),i="210px"}$(this).parents(".top").children(".bar").animate({left:i},"fast")});var c=function(a,t,i){return""==a?a=isHttps?"https://secure.gravatar.com/avatar/"+md5(t)+"?s="+i:"http://gravatar.com/avatar/"+md5(t)+"?s="+i:0==a.indexOf("http")?a+="&s="+i:a=cdnDomain+"avatar/"+a+"?imageView2/2/w/"+i,a};emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}});function t(a,t){if(a.ok){var i,e="";for(i in a=a.data){var s=c(a[i].avatar,a[i].email,48);e+='<li\tclass="pull-left"><div class="avatar"><a href="/user/'+a[i].username+'" title="'+a[i].username+'"><img alt="'+a[i].username+'" class="img-circle" src="'+s+'" width="48px" height="48px"></a></div><div class="name" style="white-space: nowrap;"><a style="word-break: normal;" href="/user/'+a[i].username+'" title="'+a[i].username+'">'+a[i].username+"</a></div></li>"}$(".sb-content "+t+" ul").html(e)}}var s,a,i={"/topics/recent":{func:function(a){if(a.ok){var t,i="";for(t in a=a.data){var e=o(a[t].title);i+='<li class="truncate"><i></i><a href="/topics/'+a[t].tid+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .topic-list ul").html(i)}},class:".topic-list"},"/articles/recent":{func:function(a){if(a.ok){var t,i="";for(t in a=a.data){var e=o(a[t].title);i+='<li class="truncate"><i></i><a href="/articles/'+a[t].id+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .article-list ul").html(i)}},class:".article-list"},"/projects/recent":{func:function(a){if(a.ok){var t,i="";for(t in a=a.data){var e=a[t].id;""!=a[t].uri&&(e=a[t].uri);var s=a[t].category+" "+a[t].name,n=a[t].logo,s=o(s);i+='<li><a href="/p/'+e+'"><div class="logo"><img src="'+n+'" alt="'+a[t].name+'" width="48px"/></div></a><div class="title"><h4><a href="/p/'+e+'?fr=sidebar" title="'+s+'">'+s+"</a></h4></div></li>"}$(".sb-content .project-list ul").html(i)}},class:".project-list"},"/resources/recent":{func:function(a){if(a.ok){var t,i="";for(t in a=a.data){var e=o(a[t].title);i+='<li class="truncate"><i></i><a href="/resources/'+a[t].id+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .resource-list ul").html(i)}},class:".resource-list"},"/comments/recent":{func:function(a){if(a.ok){var t,i=(a=a.data).comments,e="";for(t in i){var s=i[t].objinfo.uri+i[t].objid,n=a[i[t].uid],r=c(n.avatar,n.email,40),l=SG.timeago(i[t].ctime);l==i[t].ctime&&(l=l.split(" ")[0]),e+='<li><div class="pic"><a href="/user/'+n.username+'" target="_blank"><img src="'+r+'" alt="'+n.username+'" width="40px" height="40px"></a></div><div class="word"><div class="w-name"><a href="/user/'+n.username+'" target="_blank" title="'+n.username+'">'+n.username+'</a><span title="'+i[t].ctime+'">'+l+'</span></div><div class="w-page"><span>在 <a href="'+s+'#commentForm" title="'+i[t].objinfo.title+'">'+i[t].objinfo.title+'</a> 中评论</span></div><div class="w-comment"><span>'+i[t].content+"</span></div></div></li>"}$(".sb-content .cmt-list ul").html(e),emojify.run($(".sb-content .cmt-list ul").get(0))}},class:".cmt-list"},"/users/active":{func:function(a){t(a,"#active-list")},class:"#active-list"},"/users/newest":{func:function(a){t(a,"#newest-list")},class:"#newest-list"},"/websites/stat":{func:function(a){var t;a.ok&&(t="<li>会员数: <span>"+(a=a.data).user+"</span> 人</li>",0<a.topic&&(t+="<li>主题数: <span>"+a.topic+"</span> 个</li>"),0<a.article&&(t+="<li>文章数: <span>"+a.article+"</span> 篇</li>"),0<a.comment&&(t+="<li>回复数: <span>"+a.comment+"</span> 条</li>"),0<a.resource&&(t+="<li>资源数: <span>"+a.resource+"</span> 个</li>"),0<a.project&&(t+="<li>项目数: <span>"+a.project+"</span> 个</li>"),0<a.book&&(t+="<li>图书数: <span>"+a.book+"</span> 本</li>"),$(".sb-content .stat-list ul").html(t))},class:".stat-list"},"/readings/recent":{func:function(a){if(a.ok)if((a=a.data)&&0!=a.length){var t="";if(1==a.length)t='<li><a href="/readings/'+(a=a[0]).id+'" target="_blank">'+a.content+"</a></li>";else for(var i in a)t+='<li><a href="/readings/'+a[i].id+'"><div class="time"><span>10-25</span></div></a><div class="title"><h4><a href="/readings/'+a[i].id+'">'+a[i].content+"</a></h4></div></li>";$(".sb-content .reading-list ul").html(t)}else $(".sb-content .reading-list").parents(".sidebar").hide()},class:".reading-list"},"/nodes/hot":{func:function(a){if(a.ok&&null!=(a=a.data)){var t,i="";for(t in a)i+='<li><a href="/go/'+a[t].ename+'?fr=sidebar" title="'+a[t].name+'">'+a[t].name+"</a></li>";$(".sb-content .node-list ul").html(i)}},class:".node-list"},"/friend/links":{func:function(a){if(a.ok&&null!=(a=a.data)){var t,i="";for(t in a)i+='<li style="margin-left:15px; margin-bottom:5px;"><a href="'+a[t].url+'" target="_blank" title="'+a[t].name+'">'+a[t].name+"</a></li>";$(".sb-content .friendslink-list ul").html(i)}},class:".friendslink-list"},"/rank/view":{func:function(a,t){if(a.ok){data=a.data;var i,e=data.list,s="";for(i in e){var n=data.path+e[i].id,r=e[i].title;switch(data.objtype){case 0:n=data.path+e[i].tid;break;case 4:r=e[i].category+e[i].name,""!=e[i].uri&&(n=data.path+e[i].uri);break;case 5:r=e[i].name}var r=o(r),l=parseInt(i,10)+1,c="",c=l<4?'<img src="'+cdnDomain+"static/img/rank_medal"+l+'.png" width="20px">':"<em>"+l+"</em>";s+="<li>"+c+'<a href="'+n+'?fr=sidebar" title="'+r+'">'+r+"</a> - "+e[i].rank_view+" 阅读</li>"}$(".sb-content .rank-list").each(function(a){$(this).data("objtype")==data.objtype&&$(this).data("rank_type")==data.rank_type&&$(this).children().html(s)})}},class:".rank-list",data_keys:["objtype","rank_type"]}};if(void 0!==SG.SIDE_BARS)for(var n in SG.SIDE_BARS)void 0!==i[SG.SIDE_BARS[n]]&&(s=i[SG.SIDE_BARS[n]],0!=(a=$(".sidebar .sb-content "+s.class)).length&&(s.data_keys?a.each(function(a){var t,i={limit:$(this).data("limit")};for(t in s.data_keys){var e=s.data_keys[t];i[e]=$(this).data(e)}$.ajax({type:"get",url:SG.SIDE_BARS[n],data:i,dataType:"json",success:s.func,ifModified:!0})}):(""==(a=a.data("limit"))&&(a=10),$.ajax({type:"get",url:SG.SIDE_BARS[n],data:{limit:a},dataType:"json",success:s.func,ifModified:!0}))))});